-- Build file for KOW_Lib.
--
-- author Marcelo Cora√ßa de Freitas <marcelo.batera@gmail.com>
--
-- Repository information:
-- $Date$
-- $Revision$
-- $Author$



project KOWlib is

	version	:= $version;
	
	type Yes_No is ("yes", "no" );
	type Supported_OS is ("Windows_NT", "GNU/Linux", "Darwin" );


	-- the default is GNU/Linux
	OS	: Supported_OS	:= external( "OS", "GNU/Linux" );
	Debug	: Yes_No	:= external( "DEBUG", "no" );



	for Source_Dirs use ( "../../src/kowlib/" );
	for Library_Name use $project;
	for Library_kind use external( "LIBRARY_KIND", "static" );

	-- LIBRARY

	case Debug is
		when "yes" =>
			for Library_Dir use "../kowlib-debug/" & Project'Library_Kind;
		when "no" =>
			for Library_Dir use "../kowlib/" & Project'Library_Kind;
	end case;

	for Object_Dir use Project'Library_Dir & "/obj";


	case OS is
		when "Windows_NT" =>
			for Library_Kind use "static";

		when "GNU/Linux" =>
			for Library_Kind use "dynamic";

		when "Darwin" =>
			for Library_Kind use "static";
	end case;
	for Library_Version use "lib" & Project'Library_Name & ".so." & Version;
	for Externally_Built use External( "KOWLIB_EXTERNALLY_BUILT", "true" );


	package Compiler is
		for Default_Switches ("ada") use ("-O2", "-gnat05", "-fPIC");
	end Compiler;

	package Linker is
		case OS is
			when "Windows_NT" =>
			when others =>
				for Default_Switches ("ada") use ("-ldl");
		end case;
	end Linker;
end KOWlib;

